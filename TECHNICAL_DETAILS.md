# VISION_OS - æŠ€è¡“åŽŸç†èˆ‡æž¶æ§‹èªªæ˜Ž (Technical Architecture & Principles)

æœ¬æ–‡ä»¶è©³ç´°èªªæ˜Ž VISION_OS çš„æ ¸å¿ƒçµ„æˆå¥—ä»¶ã€åº•å±¤é‹ä½œåŽŸç†åŠé—œéµç®—æ³•å¯¦ä½œã€‚

## ðŸ“¦ æ ¸å¿ƒå¥—ä»¶ (Core Packages)

ç³»çµ±æŽ¡ç”¨è¼•é‡åŒ–ã€é«˜æ•ˆèƒ½çš„ç€è¦½å™¨ç«¯è¨ˆç®—æž¶æ§‹ï¼Œä¸»è¦ä¾è³´ä»¥ä¸‹å¥—ä»¶ï¼š

1.  **MediaPipe Hands (@mediapipe/hands)**:
    - **ç”¨é€”**: æ ¸å¿ƒæ©Ÿå™¨å­¸ç¿’æ¨¡åž‹ï¼Œè² è²¬å³æ™‚æ‰‹éƒ¨åµæ¸¬ã€‚
    - **åŽŸç†**: ä½¿ç”¨å·ç©ç¥žç¶“ç¶²çµ¡ (CNN) å¾žæ”åƒé ­ç•«é¢ä¸­æå– 21 å€‹æ‰‹éƒ¨é—œç¯€ (Landmarks) çš„ 3D æ­¸ä¸€åŒ–åæ¨™ (X, Y, Z)ã€‚
2.  **MediaPipe Camera Utils**:
    - **ç”¨é€”**: æä¾›é«˜æ•ˆçš„æ”åƒé ­å¹€æ•ç²ï¼Œä¸¦å°‡ç•«é¢åŒæ­¥è‡³ MediaPipe è™•ç†å¾ªç’°ã€‚
3.  **Three.js (v128)**:
    - **ç”¨é€”**: è² è²¬æ¸²æŸ“ 3D ç©ºé–“é‡å»ºã€‚
    - **åŽŸç†**: WebGL é©…å‹•çš„å¼•æ“Žï¼Œå°‡ 2D åº§æ¨™æ˜ å°„è‡³ 3D ç©ºé–“ï¼Œä¸¦å¯¦ä½œå…¨æ¯æè³ªèˆ‡ç’°å¢ƒå¾®ç²’ç‰¹æ•ˆã€‚
4.  **Google Fonts - JetBrains Mono**:
    - **ç”¨é€”**: æä¾›çµ‚ç«¯æ©Ÿé¢¨æ ¼çš„é«˜å¯è®€æ€§ç­‰å¯¬å­—é«”ã€‚

---

## âš™ï¸ åº•å±¤åŽŸç† (Core Principles)

### 1. åº§æ¨™æ˜ å°„èˆ‡ç©ºé–“è¨ˆç®— (Coordinate Mapping)
- **æ­¸ä¸€åŒ–ç©ºé–“**: MediaPipe è¿”å›žçš„ X, Y ç‚º 0.0 (å·¦ä¸Š) åˆ° 1.0 (å³ä¸‹)ã€‚
- **3D æŠ•å½±**: ç³»çµ±å°‡é€™äº›åº§æ¨™ç¿»è½‰ä¸¦æ˜ å°„åˆ° Three.js çš„ä¸–ç•Œåæ¨™ç³»ã€‚
  - `X_world = -(X_normalized - 0.5) * Scale`
  - `Y_world = -(Y_normalized - 0.5) * Scale` (Y è»¸å‘ä¸Š)
  - `Z_depth`: MediaPipe çš„ Z è»¸æ˜¯ç›¸å°æ–¼æ‰‹æŽŒä¸­å¿ƒçš„ç›¸å°æ·±åº¦ï¼Œç³»çµ±å°å…¶é€²è¡Œäº†äºŒæ¬¡åŠ æ¬Šä»¥å¼·åŒ–ç©ºé–“æ„Ÿã€‚

### 2. æ‰‹æŒ‡ä¼¸å±•åº¦ç®—æ³• (Finger Extension Logic)
ä¸åŒæ–¼å‚³çµ±çš„å…©é»žè·é›¢æ³•ï¼ŒVISION_OS æŽ¡ç”¨ **å‘é‡å¤¾è§’ç¶œåˆæ³•**ï¼š
- **åŽŸç†**: è¨ˆç®—æ‰‹æŒ‡å„å€‹é—œç¯€é–“çš„å‘é‡å¤¾è§’ã€‚
- **å…¬å¼**: `cos(Î¸) = (AÂ·B) / (|A||B|)`
- **å„ªå‹¢**: æ­¤æ–¹æ³•ä¸å—æ‰‹æŽŒèˆ‡ç›¸æ©Ÿè·é›¢é è¿‘å½±éŸ¿ (Scale Invariant)ï¼Œèƒ½ç²¾ç¢ºåˆ¤å®šæ‰‹æŒ‡æ˜¯å®Œå…¨ä¼¸ç›´ã€è‡ªç„¶å½Žæ›²é‚„æ˜¯æ”¶èµ·ã€‚

### 3. æ‰‹å‹¢è­˜åˆ¥å¼•æ“Ž (Gesture Recognition Engine)
æŽ¡ç”¨éžåŒæ­¥çš„ç‹€æ…‹æ©Ÿæ¨¡å¼èˆ‡ **é²æ»¯æ ¡æº– (Hysteresis Pattern)**ï¼š
- **å…©ç´šé–€æª» (Dual Thresholds)**: 
  - `Straight > 65`: åˆ¤å®šç‚ºä¼¸ç›´ã€‚
  - `Tucked < 35`: åˆ¤å®šç‚ºæ”¶èµ·ã€‚
- **ç©©å®šæ©Ÿåˆ¶**: æŒ‡ä»¤åˆ¤æ–·ä¸¦éžå³æ™‚åˆ‡æ›ï¼Œè€Œæ˜¯é€šéŽæ­·å²ç·©è¡å€ (`gestureHistory`) é€²è¡Œå¹³æ»‘è™•ç†ã€‚åªæœ‰ç•¶æ‰‹å‹¢åœ¨é€£çºŒ 7 å¹€å…§ä¿æŒç©©å®šï¼Œåœ–æ¨™æ‰æœƒæ›´æ–°ï¼Œå¾žè€Œæ¶ˆé™¤äº†è¦–è¦ºé–ƒçˆã€‚

### 4. é™æ¸¬èˆ‡æ•¸æ“šè¦–è¦ºåŒ– (Telemetry & Visualization)
- **Neural Heatmap (ç¥žç¶“ç†±åŠ›åœ–)**: 
  - æ ¹æ“šæ‰‹éƒ¨åœ¨ç•«é¢ä¸­çš„ä½ç½®é€²è¡Œã€Œç©ºé–“è£ç®± (Spatial Binning)ã€ï¼Œè¨ˆç®—ç‰¹å®šå€åŸŸçš„æ´»èºåº¦ï¼Œä¸¦æ˜ å°„è‡³ CSS Grid çš„é€æ˜Žåº¦ã€‚
- **Signal Analysis (ä¿¡è™Ÿåˆ†æž)**:
  - æŽ¡é›†æ¯ç§’ 20-30 æ¬¡çš„ `OpenLevel` æ•¸æ“šï¼Œå„²å­˜åœ¨ç’°å½¢éšŠåˆ—ä¸­ï¼Œå‹•æ…‹ç¹ªè£½è‡³ Canvas ç•«å¸ƒï¼Œå‘ˆç¾é¡žä¼¼ç¤ºæ³¢å™¨çš„æ•ˆæžœã€‚

---

## ðŸ› ï¸ é–‹ç™¼è¨­è¨ˆæ±ºç­– (Design Decisions)

- **é›™é€šé“è™•ç† (Dual-Channel Architecture)**: `app.js` å…§éƒ¨æŽ¡ç”¨ä¸¦è¡Œå¾ªç’°è™•ç† `multiHandLandmarks`ã€‚é›–ç„¶æ ¸å¿ƒé‚è¼¯å…±ç”¨ï¼Œä½† UI åé¥‹è¢«éš”é›¢åœ¨ `left` èˆ‡ `right` å…©å€‹å‘½åç©ºé–“ä¸‹ï¼Œç¢ºä¿æ•¸æ“šäº’ä¸å¹²æ“¾ã€‚
- **GPU åŠ é€Ÿ**: 3D å ´æ™¯ä¸­çš„å…¨æ¯æŽƒææ•ˆæžœèˆ‡èƒŒæ™¯å¾®ç²’å‡åˆ©ç”¨ WebGL é€²è¡Œç¡¬é«”åŠ é€Ÿï¼Œä»¥ç¶­æŒåœ¨ä½ŽåŠŸè€—è¨­å‚™ä¸Šçš„æµæš¢åº¦ã€‚

---

*ç”± Antigravity AI è¨­è¨ˆï¼Œå°ˆç‚ºä¸‹ä¸€ä»£ç¥žç¶“äº¤äº’ä»‹é¢ç ”ç™¼ã€‚*
